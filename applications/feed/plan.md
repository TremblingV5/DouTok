# feed及Publish模块下各目录计划增加的函数

[TOC]

## service

- [ ] 根据video id查询MySQL中的视频消息
- [ ] 在MySQl中查询多个video id对应的视频信息
- [ ] feed接口所依赖的逻辑
  - [ ] 从Redis中的用户feed信箱读取已经缓存过的视频列表
  - [ ] 判断是否满足视频条数的逻辑（视频条数写在配置文件中，通过读取的方式确认）
  - [ ] 遍历视频列表，获取每条视频信息
  - [ ] 遍历视频列表，查询user id是否对视频进行过喜欢操作
  - [ ] 在HBase中根据时间戳查询视频列表的方法
  - [ ] 检索时间范围向前24h的逻辑（向前轮询的时间存放到配置文件中）
  - [ ] 确定更新时间的逻辑（时间范围存放到配置文件中）
  - [ ] 将多余的视频数据推到Redis中的操作
  - [ ] 封装pkg中Redis的LPush RPush LPop方法
  - [ ] 计算新旧视频比例的逻辑（阈值存放到配置文件中）
- [ ] publish接口所依赖的逻辑
  - [ ] 封装pkg中OSS的操作
  - [ ] 确定视频封面
  - [ ] 向OSS中传输视频数据及封面
  - [ ] 向user服务申请用户的信息
  - [ ] 存储数据到HBase
  - [ ] 存储数据到MySQL
  - [ ] 根据user id在数据库中查询发布列表
  - [ ] 遍历视频列表并装填信息

## OSS操作

1. OSS相关的配置文件，包括回调url的参数
2. 封装到pkg的OSS Initer和相关的操作

## HBase操作

1. 初始化HBase Connector
2. 封装HBase的存储操作
3. 封装HBase的过滤器操作（即使用row key进行查询，主要针对发布视频列表）
